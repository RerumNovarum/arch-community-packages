From e5a00b5b71194be9f2881dee67d82c308406dea7 Mon Sep 17 00:00:00 2001
From: Egmont Koblinger <egmont@gmail.com>
Date: Wed, 30 Mar 2016 10:46:53 +0200
Subject: [PATCH] widget: Properly remove the cursor from its old position

https://bugzilla.gnome.org/show_bug.cgi?id=764299
---
 src/vte.cc | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/src/vte.cc b/src/vte.cc
index ce54d89..23f2782 100644
--- a/src/vte.cc
+++ b/src/vte.cc
@@ -4069,8 +4069,7 @@ VteTerminalPrivate::process_incoming()
         if ((saved_cursor.col != m_screen->cursor.col) ||
             (saved_cursor.row != m_screen->cursor.row)) {
 		/* invalidate the old and new cursor positions */
-                // FIXMEchpe shouldn't this be old_cursor_visible with an 'auto old_cursor_visible = ...'above?
-		if (m_cursor_visible)
+		if (saved_cursor_visible)
 			invalidate_cell(saved_cursor.col, saved_cursor.row);
 		invalidate_cursor_once();
 		check_cursor_blink();
@@ -4078,7 +4077,6 @@ VteTerminalPrivate::process_incoming()
 		queue_cursor_moved();
         } else if ((saved_cursor_visible != m_cursor_visible) ||
                    (saved_cursor_style != m_cursor_style)) {
-                // FIXMEchpe need to invalidate like invalidate_cursor_once() just for the saved_cursor coords!
 		invalidate_cell(saved_cursor.col, saved_cursor.row);
 		check_cursor_blink();
 	}
