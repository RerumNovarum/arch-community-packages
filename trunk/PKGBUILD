# $Id$
# Maintainer : Ionut  Biru <ibiru@archlinux.org>
# Contributor: Roman Kyrylych <Roman.Kyrylych@gmail.com>
# Contributor: William Rea <sillywilly@gmail.com>

pkgname=gnome-schedule
pkgver=2.1.2
pkgrel=1
pkgdesc="GNOME frontend to cron and at"
arch=('i686' 'x86_64')
url="http://gnome-schedule.sourceforge.net"
license=('GPL')
depends=('gnome-panel-bonobo' 'dcron' 'at' 'pygtk' 'gnome-python' 'gconf')
makedepends=('intltool' 'gnome-doc-utils')
install=$pkgname.install
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('79662c54282923541c8e98c34c7cff23')

build() {
  cd $srcdir/$pkgname-$pkgver
  export CRONTAB_CONFIG=/usr/bin/crontab
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
    --disable-scrollkeeper
  make
  make -j1 GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 DESTDIR=$pkgdir install

  mkdir -p $pkgdir/usr/share/gconf/schemas
  gconf-merge-schema $pkgdir/usr/share/gconf/schemas/${pkgname}.schemas \
    $pkgdir/etc/gconf/schemas/*.schemas
  rm -rf $pkgdir/etc/gconf/schemas/
}
