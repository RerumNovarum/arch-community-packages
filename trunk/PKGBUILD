# $Id$
# Maintainer: Kessia 'even' Pinheiro <kessiapinheiro at gmail.com> 
# Contributor: kastor <kastor@fobos.org.ar>

pkgname=libdlna
pkgver=0.2.3
pkgrel=10
pkgdesc="An open-source implementation of DLNA (Digital Living Network Alliance) standards "
url="http://libdlna.geexbox.org"
license=("LGPL")
arch=('i686' 'x86_64')
options=('!libtool' '!makeflags')  # not parallel safe, error find -ldlna  
makedepends=('ctags')
depends=('glibc' 'ffmpeg')
source=("http://libdlna.geexbox.org/releases/${pkgname}-${pkgver}.tar.bz2" "libdlna-0.2.3-libavcodec-libavformat-include-paths.patch" "ffmpeg-0.8.patch")
md5sums=('2c974f95b711e5fd07f78fc4ebfcca66'
         '937f1aebf930571127856056bd1d3959'
         'a5c9f58233fc7fc79b5fe550b297273b')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  patch -Np1 -i $srcdir/libdlna-0.2.3-libavcodec-libavformat-include-paths.patch
  patch -Np1 -i $srcdir/ffmpeg-0.8.patch
  ./configure --prefix=/usr --includedir=/usr/include/libavformat 
  make -j1 # not parallel safe, error find -ldlna
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}
  make INSTALL=/bin/install DESTDIR=${pkgdir} install
}
