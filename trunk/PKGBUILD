# $Id: PKGBUILD,v 1.9 2009/05/22 12:11:03 abhidg Exp $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=proguard
pkgver=4.3
pkgrel=1
pkgdesc="free Java class file shrinker, optimizer, obfuscator, and preverifier"
arch=(i686 x86_64)
#arch=(any)
url="http://proguard.sourceforge.net/"
license=('GPL2')
depends=('java-runtime')
source=(http://downloads.sourceforge.net/proguard/proguard$pkgver.tar.gz)
md5sums=('01ef52a1d3faa9eef3aa3385b8b5685d')

build() {
  cd "$startdir/src/$pkgname$pkgver/lib"

  mkdir -p $startdir/pkg/usr/bin && \
  mkdir -p $startdir/pkg/usr/share/proguard && \
  install -D -m0644 proguardgui.jar proguard.jar retrace.jar $startdir/pkg/usr/share/proguard/ || return 1

  cat >$startdir/pkg/usr/bin/proguardgui <<EOF
#!/bin/sh
exec java -jar /usr/share/proguard/proguardgui.jar \$*
EOF
  chmod 0755 $startdir/pkg/usr/bin/proguardgui

  cat >$startdir/pkg/usr/bin/proguard <<EOF
#!/bin/sh
exec java -jar /usr/share/proguard/proguard.jar \$*
EOF
  chmod 0755 $startdir/pkg/usr/bin/proguard
}
