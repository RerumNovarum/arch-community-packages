# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: William Rea <sillywilly@gmail.com>
# Contributor: Hans Janssen <hans@janserv.xs4all.nl>

pkgname=flightgear
pkgver=2.0.0
pkgrel=4
pkgdesc="An open-source, multi-platform flight simulator"
arch=(i686 x86_64)
depends=('simgear' 'libxmu' 'libxi' 'zlib' 'flightgear-data' 'openscenegraph' 'subversion')
makedepends=('boost')
license=("GPL")
url="http://www.flightgear.org"
options=('!makeflags')
#source=(ftp://ftp.ibiblio.org/pub/mirrors/flightgear/ftp/Source/FlightGear-$pkgver.tar.gz)
source=(http://ftp.linux.kiev.ua/pub/fgfs/Source/FlightGear-$pkgver.tar.gz)
md5sums=('549aa45171480082f5b6e5e8d5ce8930')

build() {
  cd $srcdir/FlightGear-$pkgver
  [ $NOEXTRACT -eq 1 ] || find -name \*.c\* -exec sed -i '1,2i#include <stdio.h>' {} \;
  [ $NOEXTRACT -eq 1 ] || find -name \*.c\* -exec sed -i '1,2i#include <GL/glu.h>' {} \;
  [ -f Makefile ] || ./configure --prefix=/usr
  make
}

package() {
  cd $srcdir/FlightGear-$pkgver
  make DESTDIR=$pkgdir install
}
