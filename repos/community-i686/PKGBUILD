# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Jacek Poplawski <jacekpoplawski@gmail.com> 
# Contributor: Charlie Cox <ccoxiv@yahoo.com>

pkgname=atanks
pkgver=3.9
pkgrel=1
pkgdesc="Atomic Tanks"
url="http://atanks.sourceforge.net"
license=('GPL')
arch=('i686' 'x86_64')
makedepends=('sed')
depends=('allegro' 'gcc-libs')
source=(http://downloads.sourceforge.net/project/atanks/atanks/atanks-$pkgver/atanks-$pkgver.tar.gz)
md5sums=('bc5a6d016161d3cedde909f38a805db5')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  mkdir $startdir/pkg/usr
  mkdir $startdir/pkg/usr/bin
  mkdir $startdir/pkg/usr/share
  mkdir $startdir/pkg/usr/share/applications
  mkdir $startdir/pkg/usr/share/pixmaps
  install -c -g 0 -m 644 -o 0 atanks.desktop $startdir/pkg/usr/share/applications/ && \
  install -c -g 0 -m 644 -o 0 atanks.png $startdir/pkg/usr/share/pixmaps/ || return 1

  make INSTALLDIR=/usr/share/games/atanks || return 1
  make BINDIR=$pkgdir/usr/bin INSTALLDIR=$pkgdir/usr/share/games/atanks INSTALL="install -c" install

  mv ${pkgdir}/usr/bin/atanks ${pkgdir}/usr/share/games/atanks/

  echo -e "#!/bin/bash\ncd /usr/share/games/atanks\n./atanks" > ${pkgdir}/usr/bin/atanks
  chmod 755 ${pkgdir}/usr/bin/atanks
}
