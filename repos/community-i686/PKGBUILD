# $Id$
# Maintainer: Roman Kyrylych <Roman.Kyrylych@gmail.com>
# Contributor: William Rea <sillywilly@gmail.com>

pkgname=gnome-schedule
pkgver=2.0.2
pkgrel=1
pkgdesc="GNOME frontend to cron and at"
arch=('i686' 'x86_64')
url="http://gnome-schedule.sourceforge.net"
license=('GPL')
depends=('gnome-panel' 'dcron' 'at' 'gnome-python' 'gconf>=2.18.0.1-4')
makedepends=('intltool' 'gnome-doc-utils>=0.11.2')
install=$pkgname.install
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('f2bcf9de0cb95ceaf9e0f631a6929687')

build() {
  cd $startdir/src/$pkgname-$pkgver
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
    --disable-scrollkeeper
#  sed -i 's#<!--    <othercredit role="maintainer">#    <othercredit role="maintainer">#' help/*/gnome-schedule.xml
#  sed -i 's#</othercredit> -->#</othercredit>#' help/*/gnome-schedule.xml
  make || return 1
  make -j1 GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 DESTDIR=$startdir/pkg install || return 1

  mkdir -p ${startdir}/pkg/usr/share/gconf/schemas
  gconf-merge-schema ${startdir}/pkg/usr/share/gconf/schemas/${pkgname}.schemas \
    ${startdir}/pkg/etc/gconf/schemas/*.schemas
  rm -f ${startdir}/pkg/etc/gconf/schemas/*.schemas
}
