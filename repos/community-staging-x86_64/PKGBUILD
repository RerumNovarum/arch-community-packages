# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: Anders Bergh <anders1@gmail.com>

pkgname=luasql-mysql
pkgver=2.2.0
pkgrel=2
pkgdesc="MySQL module for Lua"
arch=('i686' 'x86_64')
url="http://www.keplerproject.org/luasql/"
license=('MIT')
depends=('lua' 'libmysqlclient')
source=(https://github.com/downloads/keplerproject/luasql/luasql-$pkgver.tar.gz
	lua52.patch)
md5sums=('59d72db444c6369c936d4f03694db6b7'
         'a1d6083215e7a83cfc08621b6998914c')

build() {
  cd "$srcdir/luasql-$pkgver"
  patch -p1 <$srcdir/lua52.patch
  make T=mysql PREFIX=/usr DRIVER_LIBS="$(mysql_config --libs)" \
	DRIVER_INCS="$(mysql_config --include) -fPIC"
  install -Dm644 src/mysql.so $pkgdir/usr/lib/lua/5.2/luasql/mysql.so
  install -Dm644 doc/us/license.html $pkgdir/usr/share/licenses/$pkgname/license.html
}
