# $Id$
# Maintainer: Thomas S Hatch <thatch45@gmail.com>
# Contributor: Aaron Griffin <aaron@archlinux.org>
# Contributor: Todd Maynard <arch@toddmaynard.com>

pkgname=python2-sqlobject
pkgver=1.1.3
pkgrel=1
pkgdesc="A popular Object Relational Manager for providing an object interface to your database, with tables as classes, rows as instances, and columns as attributes"
arch=('any')
license=('LGPL')
url="http://sqlobject.org/"
depends=('python2' 'python2-distribute' 'python-formencode')
optdepends=('python-pysqlite: SQlite database support'
	'mysql-python: MySQL database support'
	'python-psycopg1: PostgreSQL database support')
source=(http://cheeseshop.python.org/packages/source/S/SQLObject/SQLObject-$pkgver.tar.gz)
md5sums=('09c865d5d08e9242e81a3e1e6bafda0b')
replaces=(python-sqlobject)
provides=(python-sqlobject)

build() {
  cd "$srcdir/SQLObject-$pkgver"
  python2 setup.py install --root="$pkgdir"

  find $pkgdir/usr/lib -type f -exec sed -i 's,^#!/usr/bin/env python,#!/usr/bin/env python2,' {} \;

  echo "/usr/lib/python2.7/site-packages/SQLObject-$pkgver-py2.6.egg" > \
    "$pkgdir/usr/lib/python2.7/site-packages/$pkgname.pth"
}
