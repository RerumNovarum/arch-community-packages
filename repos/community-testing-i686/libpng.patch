diff -wbBur gmerlin-1.0.0/plugins/png/ir_png.c gmerlin-1.0.0.my/plugins/png/ir_png.c
--- gmerlin-1.0.0/plugins/png/ir_png.c	2011-01-07 18:37:06.000000000 +0300
+++ gmerlin-1.0.0.my/plugins/png/ir_png.c	2011-11-07 14:46:25.000000000 +0400
@@ -127,13 +127,8 @@
         bits = 16;
         }
       if(bit_depth < 8)
-#if BG_MAKE_BUILD(PNG_LIBPNG_VER_MAJOR, PNG_LIBPNG_VER_MINOR, PNG_LIBPNG_VER_RELEASE) < BG_MAKE_BUILD(1,2,9)
-        png_set_gray_1_2_4_to_8(png->png_ptr);
-#else
       png_set_expand_gray_1_2_4_to_8(png->png_ptr);
-#endif
 
-        png_set_gray_1_2_4_to_8(png->png_ptr);
       if (png_get_valid(png->png_ptr, png->info_ptr, PNG_INFO_tRNS))
         {
         png_set_tRNS_to_alpha(png->png_ptr);
