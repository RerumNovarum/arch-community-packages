# Contributor: Stefan Husmann <stefan-husmann@t-online.de>
# Maintainer: Stefan Husmann <stefan-husmann@t-online.de>

pkgname=mashup
pkgver=3.0
pkgrel=1
pkgdesc="Adjusting images on a sheet of paper for printing"
url="http://kornelix.squarespace.com/printoxx"
arch=('i686' 'x86_64')
license=('GPL3')
depends=('gtk2')
replaces=('printoxx')
source=("http://kornelix.squarespace.com/storage/downloads/$pkgname-$pkgver.tar.gz")
md5sums=('feb7f5557fce1a00c377d2c6b8a9e2fc')

build() {
  cd $srcdir/$pkgname-$pkgver
  sed -i 's+xdg-deskto+#xdg-deskto+' Makefile
  make PREFIX=/usr \
    CFLAGS+="-c `pkg-config --cflags gtk+-2.0`" \
    LFLAGS+="`pkg-config --libs gtk+-2.0 gthread-2.0`"
  sed -i 's#/local##' data/desktop
  sed -i 's+# ++' data/desktop
}

package() {
  cd $srcdir/$pkgname-$pkgver
  install -Dm644 data/desktop \
    $pkgdir/usr/share/applications/$pkgname.desktop
  make DESTDIR=$pkgdir PREFIX=/usr install
  rm $pkgdir/usr/share/applications/kornelix-$pkgname.desktop
}
