# $Id$
# Contributor: Jaroslaw Swierczynski <swiergot@aur.archlinux.org>
# Contributor: Roman Kyrylych <Roman.Kyrylych@gmail.com>
# Contributor: Rabyte <rabyte [at] gmail (dot) com>

pkgname=assaultcube
pkgver=1.0.2
pkgrel=2
pkgdesc="A realistic team oriented multiplayer FPS based on the Cube engine"
arch=('i686' 'x86_64')
url="http://assault.cubers.net/"
license=('ZLIB' 'custom')
replaces=('actioncube')
depends=('sdl_mixer' 'sdl_image' 'mesa' 'openal')
source=(http://downloads.sourceforge.net/actiongame/AssaultCube_v$pkgver.tar.bz2 \
        assaultcube assaultcube-server  assaultcube.desktop  assaultcube.png)
md5sums=('e083182699e65c240d8c7fa051644e6f' 'f8c4da495c7d9678a96efee77726813c'\
         'ea79f02b85d30ac4c36893cf749caa98' 'a37dfbe8263f4ef8fe41120196194eae'\
         'f688c59ecee2ebc5c589720aa1480765')
sha1sums=('7b0ad8c1c3960eed59a14b22aa25d40afe080275' '49f8132fa1f1399d122defdb940d8c100f9bfc8c'\
         '3cf1e965b46fb5a726427d95e747ac035a292bfd' 'b6db601269851c7ef15e262257775bc2d75f7273'\
         '6782d0649e325c491376264de5ca3c177af8d363')

build() {
  cd "$srcdir/AssaultCube_v$pkgver/source/src"

  make || return 1
  strip ac_{client,server}
  install -D ac_client "$pkgdir/usr/bin/ac_client" || return 1
  install -D ac_server "$pkgdir/usr/bin/ac_server" || return 1
  install -D "$srcdir/assaultcube" "$pkgdir/usr/bin/assaultcube" || return 1
  install -D "$srcdir/assaultcube-server" "$pkgdir/usr/bin/assaultcube-server" || return 1

  mkdir -p "$pkgdir/usr/share/assaultcube/packages"
  cd "$srcdir/AssaultCube_v$pkgver"
  cp -rf config packages bot "$pkgdir/usr/share/assaultcube" || return 1

  install -Dm644 "$srcdir/assaultcube.png" "$pkgdir/usr/share/pixmaps/assaultcube.png"
  install -Dm644 "$srcdir/assaultcube.desktop" "$pkgdir/usr/share/applications/assaultcube.desktop"
  install -Dm644 docs/package_copyrights.txt "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
