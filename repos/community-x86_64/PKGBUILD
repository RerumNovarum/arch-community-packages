# $Id$
# Maintainer: Felix Yan <felixonmars@gmail.com>

pkgname=pidgin-lwqq
pkgver=0.1f
_commit=66b7498a7530a1c47dabbe05c0726a9188353217
pkgrel=2
pkgdesc="A pidgin plugin based on lwqq, a excellent safe useful library for webqq protocol"
arch=('i686' 'x86_64')
url="https://github.com/xiehuc/pidgin-lwqq"
license=('GPL3')
depends=('libpurple' 'curl' 'libev' 'hicolor-icon-theme' 'gtk-update-icon-cache')
optdepends=('pidgin: Multi-protocol instant messaging client'
	    'telepathy-haze: Empathy plugin support')
makedepends=('git' 'cmake')
install=$pkgname.install
#source=("git://github.com/xiehuc/pidgin-lwqq.git#commit=$_commit")
source=("git://github.com/xiehuc/pidgin-lwqq.git#tag=$pkgver"
        https://github.com/lawm/pidgin-lwqq/commit/4c98edd0ad4ffa3d3472e5452f77b2be9ab56284.patch)

build()
{
  cd "${srcdir}/$pkgname"

  patch -p1 -i ../4c98edd0ad4ffa3d3472e5452f77b2be9ab56284.patch

  cmake -DCMAKE_INSTALL_PREFIX=/usr .
  make
}

package()
{
  cd "$srcdir/$pkgname"
  make DESTDIR="${pkgdir}" install
}
sha512sums=('SKIP'
            '22c98c5f88612331d8a6f33d8cb3985325b9e137936e1f962058efc2c8caf218f74f29ce675569cb8887f85ae976310c86c6e9687114fbda524825a53c550c4d')
