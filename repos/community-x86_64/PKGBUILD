# $Id$
# Maintainer: Roman Kyrylych <roman@archlinux.org>
# Contributor: Tor Krill <tor@krill.nu>

pkgname=nautilus-actions
pkgver=1.4.1
pkgrel=3
pkgdesc="Configures programs to be launched when files are selected in Nautilus"
arch=('i686' 'x86_64')
url="http://www.grumz.net/index.php?q=node/8"
license=('GPL')
depends=('nautilus>=2.22' 'libglade' 'gconf>=2.18.0.1-4' 'desktop-file-utils' \
         'hicolor-icon-theme')
makedepends=('intltool' 'gnome-doc-utils>=0.11.2')
install=nautilus-actions.install
options=('!libtool' '!emptydirs')
source=(ftp://ftp2.grumz.net/grumz/$pkgname-$pkgver.tar.gz)
md5sums=('3e4af1af386bc2141dc509999767b207')

build() {
  cd $startdir/src/$pkgname-$pkgver
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var
  make || return 1
  make -j1 GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 DESTDIR=$startdir/pkg install

  mkdir -p ${startdir}/pkg/usr/share/gconf/schemas
  gconf-merge-schema ${startdir}/pkg/usr/share/gconf/schemas/${pkgname}.schemas \
    ${startdir}/pkg/etc/gconf/schemas/*.schemas
  rm -f ${startdir}/pkg/etc/gconf/schemas/*.schemas
}
